#!/bin/bash
cd src
echo "Building main"
~/firefly/proj/firefly-sdk/buildroot/output/rockchip_rk1808/host/bin/aarch64-linux-g++ \
    -o ../build/main \
        main.cpp \
        quaternions.cpp \
        stance.cpp \
        bmi2.c \
        bmi270.c \
        bmm150.c \
        imu_utils.cpp \
        utils.cpp \
        madgwick.cpp \
        math_util.cpp \
        bin_log.cpp \
        input_parser.cpp \
    -std=c++17 \
    -Wall \
    -pthread \
    -lstdc++fs \
    -ldl \
    -L/home/colin/firefly/proj/firefly-sdk/buildroot/output/rockchip_rk1808/target/usr/lib \
        -lrknn_api \
        -li2c \
    && \
echo "Building calibrator"
~/firefly/proj/firefly-sdk/buildroot/output/rockchip_rk1808/host/bin/aarch64-linux-g++ \
    -o ../build/calibrate \
        calibrate_bmi270.cpp \
        bmi2.c \
        bmi270.c \
        imu_utils.cpp \
        bmm150.c \
    -std=c++17 \
    -Wall \
    -lstdc++fs \
    -L/home/colin/firefly/proj/firefly-sdk/buildroot/output/rockchip_rk1808/target/usr/lib \
        -li2c \
    && \
echo "Copying main executable to Rockchip"
scp ../build/main root@192.168.2.114:/root/main
